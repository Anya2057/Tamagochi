<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>English Learning Tamagotchi</title>
    <style>
        :root {
            --bg-living: #ffecb3;
            --bg-kitchen: #c8e6c9;
            --bg-bathroom: #bbdefb;
        }
        body { font-family: 'Arial', sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; background: #2c3e50; }
        
        #game-container { width: 380px; background: white; border: 6px solid #444; border-radius: 30px; padding: 20px; text-align: center; }
        
        /* –≠–∫—Ä–∞–Ω */
        #screen { 
            height: 250px; border-radius: 15px; position: relative; 
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            transition: background 0.5s; border: 3px solid #ddd; overflow: hidden;
        }

        /* –ü–µ—Ä—Å–æ–Ω–∞–∂ –∏ –ø—Ä–µ–¥–º–µ—Ç—ã */
        #character-box { position: relative; font-size: 80px; z-index: 2; }
        #item-overlay { 
            position: absolute; font-size: 50px; bottom: 20px; right: 20px; 
            opacity: 0; transition: 0.3s; z-index: 3;
        }

        /* –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ */
        .stats { display: flex; justify-content: space-between; margin-bottom: 15px; font-size: 14px; font-weight: bold; }
        .stat-bar { background: #eee; border-radius: 5px; height: 10px; width: 60px; margin-top: 5px; overflow: hidden;}
        .fill { height: 100%; width: 100%; transition: 0.3s; }

        /* –ö–Ω–æ–ø–∫–∏ */
        .controls { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 20px; }
        button { 
            padding: 12px 5px; border-radius: 10px; border: none; background: #3498db; color: white; 
            font-weight: bold; cursor: pointer; font-size: 13px; box-shadow: 0 4px #2980b9;
        }
        button:active { transform: translateY(2px); box-shadow: 0 2px #2980b9; }
        button.move { background: #e67e22; box-shadow: 0 4px #d35400; }

        .bubble {
            position: absolute; top: 20px; background: white; padding: 5px 10px;
            border-radius: 15px; border: 2px solid #333; font-size: 14px; display: none;
        }
    </style>
</head>
<body>

<div id="game-container">
    <div class="stats">
        <div>Hunger<div class="stat-bar"><div id="h-fill" class="fill" style="background: #e74c3c;"></div></div></div>
        <div>Happiness<div class="stat-bar"><div id="ha-fill" class="fill" style="background: #2ecc71;"></div></div></div>
        <div>Energy<div class="stat-bar"><div id="e-fill" class="fill" style="background: #f1c40f;"></div></div></div>
    </div>

    <div id="screen" style="background: var(--bg-living);">
        <div id="speech-bubble" class="bubble">I'm bored...</div>
        <div id="character-box">üê±</div>
        <div id="item-overlay"></div>
        <div id="room-name" style="position:absolute; bottom:5px; color:rgba(0,0,0,0.3); font-weight:bold;">LIVING ROOM</div>
    </div>

    <div class="controls" id="btn-group"></div>
</div>

<script>
    let hunger = 20;
    let happy = 80;
    let energy = 100;
    let currentRoom = 'living';

    const foodList = ['üçé an apple', 'üçï a pizza', 'üçå a banana', 'ü•¶ broccoli', 'üç∞ a cake'];
    
    function updateBars() {
        document.getElementById('h-fill').style.width = hunger + '%';
        document.getElementById('ha-fill').style.width = happy + '%';
        document.getElementById('e-fill').style.width = energy + '%';
        
        const pet = document.getElementById('character-box');
        if (hunger > 70) pet.innerText = 'üòø';
        else if (happy < 30) pet.innerText = 'üôÄ';
        else if (energy < 20) pet.innerText = 'üò¥';
        else pet.innerText = 'üê±';
    }

    function showAction(emoji, text) {
        const item = document.getElementById('item-overlay');
        const bubble = document.getElementById('speech-bubble');
        const pet = document.getElementById('character-box');

        item.innerText = emoji;
        item.style.opacity = '1';
        bubble.innerText = text;
        bubble.style.display = 'block';
        pet.style.transform = 'scale(1.2)';

        setTimeout(() => {
            item.style.opacity = '0';
            bubble.style.display = 'none';
            pet.style.transform = 'scale(1)';
        }, 2000);
    }

    const rooms = {
        living: {
            color: 'var(--bg-living)',
            name: 'LIVING ROOM',
            actions: [
                { text: "Watch TV üì∫", run: () => { happy += 20; energy -= 10; showAction('üì∫', 'I like this show!'); } },
                { text: "Read a book üìñ", run: () => { happy += 15; showAction('üìñ', 'Great story!'); } },
                { text: "Go to Kitchen ‚ûî", move: 'kitchen' }
            ]
        },
        kitchen: {
            color: 'var(--bg-kitchen)',
            name: 'KITCHEN',
            actions: [
                { text: "Eat food üç¥", run: () => { 
                    const food = foodList[Math.floor(Math.random() * foodList.length)];
                    hunger = Math.max(0, hunger - 30);
                    showAction(food.split(' ')[1], "I am eating " + food); 
                }},
                { text: "Drink water üíß", run: () => { hunger = Math.max(0, hunger - 5); showAction('üíß', 'Fresh!'); } },
                { text: "Go to Living Room ‚ûî", move: 'living' }
            ]
        }
    };

    function renderRoom(roomKey) {
        currentRoom = roomKey;
        const room = rooms[roomKey];
        const screen = document.getElementById('screen');
        const btnGroup = document.getElementById('btn-group');
        
        screen.style.background = room.color;
        document.getElementById('room-name').innerText = room.name;
        btnGroup.innerHTML = '';

        room.actions.forEach(act => {
            const b = document.createElement('button');
            b.innerText = act.text;
            if (act.move) b.className = 'move';
            b.onclick = () => {
                if (act.move) renderRoom(act.move);
                else {
                    act.run();
                    updateBars();
                }
            };
            btnGroup.appendChild(b);
        });
    }

    // –¢–∞–π–º–µ—Ä—ã: –≥–æ–ª–æ–¥ –∏ —Å–∫—É–∫–∞ —Ä–∞—Å—Ç—É—Ç
    setInterval(() => {
        hunger = Math.min(100, hunger + 2);
        happy = Math.max(0, happy - 1);
        updateBars();
    }, 4000);

    renderRoom('living');
    updateBars();
</script>

</body>
</html>
